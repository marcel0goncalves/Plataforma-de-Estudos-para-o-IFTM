<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Plataforma de Prepara√ß√£o IFTM - Marcelo Gon√ßalves Cardoso</title>
    <style>
        /* =======================================================
        ¬† ¬† ¬† ¬† 1. ESTILIZA√á√ÉO GERAL (CSS EMBUTIDO) - NOVO ESQUEMA DE CORES (VERDE/TEAL)
        ¬† ¬† ¬† ¬† ======================================================= */
        :root {
            --cor-principal: #008080; /* Verde-√Ågua / Teal IFTM */
            --cor-acento: #00bfff; /* Azul C√©u (Acento vibrante) */
            --cor-secundaria: #6c757d;
            --cor-fundo: #f0fdfa; /* Fundo mais claro e suave */
            --cor-texto: #343a40;
            --cor-sucesso: #28a745;
            --cor-erro: #dc3545;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--cor-fundo);
            color: var(--cor-texto);
        }
        
        /* Estiliza√ß√£o padr√£o para o conte√∫do dentro das p√°ginas */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Classes de exibi√ß√£o */
        .page {
            display: none;
            padding-top: 65px; /* Ajuste para o menu fixo maior */
            min-height: 100vh;
        }
        .page.active {
            display: block;
        }

        /* =======================================================
        ¬† ¬† ¬† ¬† 2. SPLASH SCREEN
        ¬† ¬† ¬† ¬† ======================================================= */
        #splash-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            background: linear-gradient(135deg, var(--cor-principal) 0%, #00b5ad 100%); /* Gradiente VT */
            color: white;
            padding: 20px;
        }

        #splash-screen h1 {
            font-size: 2.8rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        #btn-comecar {
            padding: 18px 40px;
            font-size: 1.3rem;
            border: none;
            border-radius: 50px; /* Mais arredondado */
            cursor: pointer;
            background-color: var(--cor-acento);
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        #btn-comecar:hover {
            background-color: #0099cc;
            transform: scale(1.05);
        }

        /* =======================================================
        ¬† ¬† ¬† ¬† 3. HEADER E NAVEGA√á√ÉO (MODIFICADO PARA CENTRALIZAR E AUMENTAR)
        ¬† ¬† ¬† ¬† ======================================================= */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #ffffff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        
        /* Centraliza√ß√£o do Menu: NOVO CSS */
        nav {
            display: flex;
            justify-content: center; /* Centraliza os itens do menu no meio da tela */
            padding: 5px 0; /* Ajuste de padding vertical */
        }
        
        /* Aumento do Tamanho dos Itens do Menu: NOVO CSS */
        nav button {
            color: var(--cor-principal);
            border: none;
            background: none;
            cursor: pointer;
            padding: 15px 30px; /* Aumenta o tamanho do bot√£o */
            font-size: 1.15rem; /* Aumenta o tamanho da fonte */
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            margin: 0 10px; /* Espa√ßamento entre os bot√µes */
        }

        nav button:hover, nav button.active {
            border-bottom: 3px solid var(--cor-acento);
            color: var(--cor-acento);
        }

        /* =======================================================
        ¬† ¬† ¬† ¬† 4. CONTE√öDO (HOME E MAT√âRIAS)
        ¬† ¬† ¬† ¬† ======================================================= */
        h2 {
            color: var(--cor-principal);
            border-bottom: 2px solid var(--cor-acento);
            padding-bottom: 5px;
            margin-top: 0;
        }
        
        .card-materia {
            background-color: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-left: 5px solid var(--cor-principal);
            transition: transform 0.2s, box-shadow 0.2s, border-left 0.2s;
            cursor: pointer; /* Adicionado para indicar clicabilidade */
        }

        .card-materia:hover {
            border-left: 5px solid var(--cor-acento);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Estilo para lista de t√≥picos detalhados */
        .lista-topicos {
            list-style: none;
            padding: 0;
        }
        .lista-topicos li {
            background-color: #e6f7f7; /* Tom mais claro de verde/ciano */
            border-left: 4px solid var(--cor-principal);
            margin-bottom: 8px;
            padding: 10px 15px;
            border-radius: 4px;
            font-size: 1.05rem; /* Aumento sutil da fonte */
        }

        /* =======================================================
        ¬† ¬† ¬† ¬† 5. SE√á√ÉO DE AVALIA√á√ÉO (QUIZ)
        ¬† ¬† ¬† ¬† ======================================================= */
        #quiz-config, #quiz-content, #quiz-results {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        #btn-iniciar-quiz {
            background-color: var(--cor-principal);
            color: white;
            font-weight: bold;
            padding: 12px 25px; /* Aumenta o tamanho do bot√£o */
            font-size: 1.1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #btn-iniciar-quiz:hover {
            background-color: #006666;
        }
        
        /* Estiliza√ß√£o das Quest√µes e Op√ß√µes (Aumento do Tamanho) */
        .question-card {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 6px;
        }
        
        .question-card h4 {
            font-size: 1.15rem; /* Aumenta a fonte da pergunta */
            margin-top: 0;
        }
        
        .option-label {
            display: block;
            background: #f0fdfa;
            padding: 12px 15px; /* Aumenta o tamanho da op√ß√£o */
            margin-bottom: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.05rem; /* Aumenta a fonte da op√ß√£o */
            transition: background 0.2s, border-color 0.2s;
        }
        
        .option-label:hover {
            background: #d4eaea;
            border-color: var(--cor-principal);
        }
        
        /* Estilo para op√ß√£o selecionada */
        input[type="radio"]:checked + .option-label {
            background: #c7ede5; /* Um verde-√°gua mais suave */
            border-color: var(--cor-principal);
            font-weight: bold;
        }
        
        /* Esconde o radio button nativo */
        input[type="radio"] {
            display: none;
        }
        
        /* Estiliza√ß√£o do Relat√≥rio */
        .feedback-item {
            border: 1px solid var(--cor-erro);
            background-color: #ffe0e0; /* Vermelho mais suave */
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 6px;
        }
        .feedback-item h4 {
            color: var(--cor-erro);
            font-size: 1.1rem;
        }
        .correct { color: var(--cor-sucesso); font-weight: bold; }
        .incorrect { color: var(--cor-erro); font-weight: bold; }

        /* Estilo para o bot√£o de finalizar quiz */
        #btn-finalizar-quiz, #quiz-results button {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            margin-top: 20px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        #btn-finalizar-quiz {
            background-color: var(--cor-sucesso);
            color: white;
        }
        
        #btn-finalizar-quiz:hover {
            background-color: #1e7e34;
        }


        /* =======================================================
        ¬† ¬† ¬† ¬† 6. RODAP√â
        ¬† ¬† ¬† ¬† ======================================================= */
        footer {
            background-color: var(--cor-principal);
            color: white;
            text-align: center;
            padding: 10px 0;
            margin-top: 40px;
        }
        
        /* Ajuste para elementos de formul√°rio */
        .form-group label {
            font-weight: bold;
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
        }
        .form-group select {
            width: 100%;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            font-size: 1rem;
        }
        .name-gatinha{
            color: red;
            display: flex;
            justify-content: left;
            margin-top: 10vh;
        }

    </style>
</head>
<body>

    <div id="splash-screen">
        <h1>üöÄ Plataforma de Prepara√ß√£o para IFTM</h1>
        <button id="btn-comecar">Come√ßar a Estudar ‚ñ∂Ô∏è</button>
    </div>

    <header id="main-header" style="display: none;">
        <nav>
            <button onclick="showPage('home-page', this)" id="nav-home" class="active">üè† Home</button>
            <button onclick="showPage('quiz-page', this)" id="nav-avaliacao">üìù Avalia√ß√£o</button>
        </nav>
    </header>

    <div id="home-page" class="page active container">
        <h2>√Åreas de Estudo üìö</h2>
        <p>Selecione uma mat√©ria para ver o conte√∫do detalhado ou clique em 'üìù Avalia√ß√£o' no menu para testar seus conhecimentos.</p>
        
        <div id="materias-list">
            <div class="card-materia" data-target="materia-portugues">
                <h3>üó£Ô∏è L√≠ngua Portuguesa</h3>
            </div>
            <div class="card-materia" data-target="materia-matematica">
                <h3>üßÆ Matem√°tica</h3>
            </div>
            <div class="card-materia" data-target="materia-ciencias">
                <h3>üî¨ Ci√™ncias da Natureza</h3>
            </div>
            <div class="card-materia" data-target="materia-historia">
                <h3>üìú Hist√≥ria</h3>
            </div>
            <div class="card-materia" data-target="materia-geografia">
                <h3>üåé Geografia</h3>
            </div>
        </div>

        <div id="materia-detalhes">
            <div id="materia-portugues" class="materia-detalhe" style="display: none;">
                <button onclick="showPage('home-page')" style="margin-bottom: 15px; background: #ccc; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">&larr; Voltar para Mat√©rias</button>
                <h3>üó£Ô∏è L√≠ngua Portuguesa</h3>
                <ul class="lista-topicos">
                    <li>Interpreta√ß√£o de Textos: Tema, Ideia Principal, Finalidade e Tom.</li>
                    <li>Ideias Principais: Distin√ß√£o entre mensagem central e detalhes.</li>
                    <li>Significado de Palavras: Sentido Denotativo e Conotativo.</li>
                    <li>Ortografia Avan√ßada: Mal/Mau, Mas/Mais, Porqu√™s, H√≠fen e Acentua√ß√£o.</li>
                    <li>Pontua√ß√£o: Uso da V√≠rgula (Separa√ß√£o, Isola√ß√£o), Ponto-e-v√≠rgula e Dois-pontos.</li>
                    <li>Classes Gramaticais: Reconhecimento e fun√ß√£o de Substantivo, Verbo, Adjetivo e Adv√©rbio.</li>
                    <li>Concord√¢ncia: Verbal (sujeito-verbo) e Nominal (artigo/adjetivo-substantivo).</li>
                    <li>Crase: Regras de Uso e Proibi√ß√µes.</li>
                    <li>Forma√ß√£o de Palavras: Deriva√ß√£o (Prefixal/Sufixal) e Composi√ß√£o.</li>
                    <li>Coes√£o e Coer√™ncia Textual: Conectivos e Sentido Global.</li>
                </ul>
            </div>
            <div id="materia-matematica" class="materia-detalhe" style="display: none;">
                <button onclick="showPage('home-page')" style="margin-bottom: 15px; background: #ccc; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">&larr; Voltar para Mat√©rias</button>
                <h3>üßÆ Matem√°tica</h3>
                <ul class="lista-topicos">
                    <li>Quatro Opera√ß√µes: Propriedades e T√©cnicas de C√°lculo.</li>
                    <li>MMC/MDC: M√∫ltiplos e Divisores.</li>
                    <li>Fra√ß√µes e Decimais: Simplifica√ß√£o, Equival√™ncia e Opera√ß√µes.</li>
                    <li>Porcentagem: C√°lculo de Aumentos/Descontos e Proporcionalidades.</li>
                    <li>Regra de Tr√™s: Simples (Direta/Inversa) e Composta.</li>
                    <li>Express√µes Num√©ricas: Ordem de Opera√ß√µes (PEMDAS/Par√™nteses, Expoentes, Multiplica√ß√£o...).</li>
                    <li>Equa√ß√µes Simples: Resolu√ß√£o de Equa√ß√µes do 1¬∫ Grau.</li>
                    <li>Geometria: √Årea, Per√≠metro (Ret√¢ngulo, Tri√¢ngulo, C√≠rculo) e Volume (S√≥lidos b√°sicos).</li>
                    <li>Racioc√≠nio L√≥gico: Sequ√™ncias Num√©ricas e Padr√µes.</li>
                </ul>
            </div>
            <div id="materia-ciencias" class="materia-detalhe" style="display: none;">
                <button onclick="showPage('home-page')" style="margin-bottom: 15px; background: #ccc; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">&larr; Voltar para Mat√©rias</button>
                <h3>üî¨ Ci√™ncias da Natureza</h3>
                <ul class="lista-topicos">
                    <li>Corpo Humano e Sa√∫de: Anatomia b√°sica e H√°bitos Saud√°veis.</li>
                    <li>Sistemas do Corpo: Fun√ß√µes principais (Digest√≥rio, Respirat√≥rio, Circulat√≥rio, Nervoso).</li>
                    <li>Alimenta√ß√£o e Higiene: Nutrientes essenciais e Preven√ß√£o de Doen√ßas.</li>
                    <li>Seres Vivos e Ecossistemas: Cadeias Alimentares, Produtores, Consumidores, Decompositores.</li>
                    <li>Meio Ambiente: Impactos Humanos (Polui√ß√£o, Desmatamento) e Conserva√ß√£o.</li>
                    <li>Mat√©ria e Energia: Estados e Transforma√ß√µes; Fontes de Energia.</li>
                    <li>Terra e Universo: Estrutura da Terra, Sistema Solar e Gal√°xias.</li>
                    <li>Movimentos da Terra: Rota√ß√£o (Dia/Noite) e Transla√ß√£o (Esta√ß√µes).</li>
                    <li>Fases da Lua: Ciclo Lunar e suas causas.</li>
                </ul>
            </div>
            <div id="materia-historia" class="materia-detalhe" style="display: none;">
                <button onclick="showPage('home-page')" style="margin-bottom: 15px; background: #ccc; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">&larr; Voltar para Mat√©rias</button>
                <h3>üìú Hist√≥ria</h3>
                <ul class="lista-topicos">
                    <li>Brasil: Col√¥nia (Escravid√£o, Economia), Imp√©rio (Monarquia), Rep√∫blica (Olig√°rquica, Varguismo).</li>
                    <li>Cultura Ind√≠gena/Africana: Influ√™ncias e Resist√™ncia Cultural.</li>
                    <li>Independ√™ncia e Proclama√ß√£o da Rep√∫blica: Datas e Consequ√™ncias.</li>
                    <li>Constitui√ß√£o e Cidadania: Direitos e Deveres.</li>
                    <li>Civiliza√ß√µes Antigas: Legados da Mesopot√¢mia, Egito, Gr√©cia e Roma.</li>
                    <li>Idades Hist√≥ricas: M√©dia (Feudalismo), Moderna (Renascimento), Contempor√¢nea (Revolu√ß√µes).</li>
                    <li>Ditadura Militar e Redemocratiza√ß√£o: Contexto, Repress√£o e Constitui√ß√£o de 1988.</li>
                </ul>
            </div>
            <div id="materia-geografia" class="materia-detalhe" style="display: none;">
                <button onclick="showPage('home-page')" style="margin-bottom: 15px; background: #ccc; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">&larr; Voltar para Mat√©rias</button>
                <h3>üåé Geografia</h3>
                <ul class="lista-topicos">
                    <li>Pontos Cardeais: Orienta√ß√£o e Rosa dos Ventos.</li>
                    <li>Cartografia: Escala, Legenda, Coordenadas (Latitude/Longitude).</li>
                    <li>Regi√µes do Brasil: Caracter√≠sticas socioecon√¥micas e ambientais (Norte, Nordeste, Centro-Oeste, Sudeste, Sul).</li>
                    <li>Popula√ß√£o e Migra√ß√µes: Distribui√ß√£o, √äxodo Rural, Taxas Demogr√°ficas.</li>
                    <li>Atividades Econ√¥micas: Setores Prim√°rio, Secund√°rio, Terci√°rio e Quart√°rio.</li>
                    <li>Continentes e Pa√≠ses: Localiza√ß√£o e Caracter√≠sticas Globais.</li>
                    <li>Meio Ambiente e Preserva√ß√£o: Desmatamento, Polui√ß√£o e Unidades de Conserva√ß√£o.</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div id="quiz-page" class="page container">
        <h2>Avalia√ß√£o: Teste Seus Conhecimentos üß†</h2>

        <div id="quiz-config">
            <h3>Configure Seu Teste</h3>
            <div class="form-group">
                <label for="select-disciplina">Selecione a(s) Disciplina(s):</label>
                <select id="select-disciplina" multiple size="5">
                    <option value="portugues" selected>L√≠ngua Portuguesa üó£Ô∏è</option>
                    <option value="matematica">Matem√°tica ‚ûï</option>
                    <option value="ciencias">Ci√™ncias da Natureza üß¨</option>
                    <option value="historia">Hist√≥ria üëë</option>
                    <option value="geografia">Geografia üó∫Ô∏è</option>
                </select>
                <small>Segure **CTRL/CMD** para selecionar m√∫ltiplas.</small>
            </div>
            <div class="form-group">
                <label for="select-nivel">N√≠vel de Dificuldade:</label>
                <select id="select-nivel">
                    <option value="facil">F√°cil (Iniciante) üë∂</option>
                    <option value="medio" selected>M√©dio (Intermedi√°rio) üßë</option>
                    <option value="dificil">Dif√≠cil (Avan√ßado) üéì</option>
                </select>
            </div>
            <button id="btn-iniciar-quiz">Iniciar Quiz (15 Quest√µes) üèÅ</button>
        </div>
<div>
    <h1 class="nome-gatinha">Raissa Linda </h1>
</div>
        <div id="quiz-content" style="display: none;">
            <h3>Quiz de Prepara√ß√£o</h3>
            <p>Quest√£o <span id="current-question-number">1</span> de 15</p>
            <div id="questions-container">
                </div>
            <button id="btn-finalizar-quiz" style="display: none;">Finalizar Quiz e Ver Resultado ‚úÖ</button>
        </div>

        <div id="quiz-results" style="display: none;">
            <h3>Relat√≥rio de Desempenho üìä</h3>
            <p>Total de Acertos: <span id="total-acertos" class="correct"></span> / 15</p>
            <p>Total de Erros: <span id="total-erros" class="incorrect"></span> / 15</p>
            
            <h4>Desempenho por Disciplina:</h4>
            <div id="desempenho-disciplinas">
                </div>

            <h4>Revis√£o e Feedback:</h4>
            <div id="feedback-revisao">
                </div>
            <button onclick="showPage('quiz-page')">Fazer Novo Teste üîÑ</button>
        </div>
    </div>

    <footer>
        <p>&copy; Direitos Reservados: Marcelo Gon√ßalves Cardoso</p>
    </footer>

    <script>
        
        // =======================================================
        // 1. BANCO DE QUEST√ïES (EXPANDIDO)
        // =======================================================
        const QUESTION_COUNT = 15;
        const questionsDB = [
            // PORTUGU√äS
            { id: 1, disciplina: 'portugues', nivel: 'facil', texto: 'Qual classe gramatical nomeia seres e objetos?', opcoes: ['Adjetivo', 'Verbo', 'Substantivo', 'Adv√©rbio'], resposta_correta: 'Substantivo', explicacao: 'Substantivos s√£o a classe de palavras que d√° nome a seres, objetos, lugares, sentimentos e ideias. O adjetivo qualifica, o verbo indica a√ß√£o e o adv√©rbio modifica.' },
            { id: 6, disciplina: 'portugues', nivel: 'dificil', texto: 'Em qual op√ß√£o o uso da Crase est√° correto?', opcoes: ['Fui √† padaria.', 'Fui √† ele.', 'Vou √† Salvador.', 'Ela se refere √† algo.'], resposta_correta: 'Fui √† padaria.', explicacao: 'O verbo "ir" exige a preposi√ß√£o "a" (Fui a) e a palavra "padaria" exige o artigo feminino "a" (a padaria). A fus√£o √© obrigat√≥ria (Fui √† padaria). As demais est√£o incorretas: antes de pronome pessoal ("ele"), antes de nome de lugar que n√£o aceita artigo ("Salvador") e antes de pronome indefinido ("algo"), a crase √© proibida.' },
            { id: 7, disciplina: 'portugues', nivel: 'medio', texto: 'Qual figura de linguagem se baseia na omiss√£o de um termo facilmente subentendido?', opcoes: ['Met√°fora', 'Elipse', 'Hip√©rbole', 'Eufemismo'], resposta_correta: 'Elipse', explicacao: 'Elipse √© a omiss√£o de um termo que pode ser facilmente identificado pelo contexto, diferentemente da zeugma, que omite um termo j√° mencionado. Met√°fora √© compara√ß√£o impl√≠cita, hip√©rbole √© exagero e eufemismo √© suaviza√ß√£o.' },
            // MATEM√ÅTICA
            { id: 2, disciplina: 'matematica', nivel: 'facil', texto: 'Qual o resultado de 5 + 3 * 2?', opcoes: ['16', '11', '13', '10'], resposta_correta: '11', explicacao: 'A ordem das opera√ß√µes exige que a multiplica√ß√£o (3 * 2 = 6) seja feita antes da adi√ß√£o (5 + 6 = 11).' },
            { id: 8, disciplina: 'matematica', nivel: 'medio', texto: 'Uma televis√£o custa R$ 800,00. Se ela for vendida com 10% de desconto, qual ser√° o valor final?', opcoes: ['R$ 790,00', 'R$ 720,00', 'R$ 880,00', 'R$ 700,00'], resposta_correta: 'R$ 720,00', explicacao: 'O desconto de 10% de R$ 800,00 √© R$ 80,00. O valor final √© R$ 800,00 - R$ R$ 80,00 = R$ 720,00.' },
            { id: 9, disciplina: 'matematica', nivel: 'dificil', texto: 'Se 3 torneiras enchem um tanque em 6 horas, quantas horas 2 torneiras levariam para encher o mesmo tanque?', opcoes: ['4 horas', '9 horas', '12 horas', '8 horas'], resposta_correta: '9 horas', explicacao: '√â uma regra de tr√™s inversa: (3 torneiras * 6 horas) = (2 torneiras * X horas). 18 = 2X. X = 9 horas.' },
            // GEOGRAFIA
            { id: 3, disciplina: 'geografia', nivel: 'facil', texto: 'Qual ponto cardeal fica √† direita do Norte em um mapa?', opcoes: ['Sul', 'Leste', 'Oeste', 'Noroeste'], resposta_correta: 'Leste', explicacao: 'O Leste (East) fica √† direita do Norte em um mapa padr√£o, seguindo o sentido hor√°rio (N, L, S, O).' },
            { id: 10, disciplina: 'geografia', nivel: 'medio', texto: 'Qual regi√£o brasileira √© a maior em extens√£o territorial e onde se localiza a maior parte da Floresta Amaz√¥nica?', opcoes: ['Nordeste', 'Centro-Oeste', 'Norte', 'Sudeste'], resposta_correta: 'Norte', explicacao: 'A Regi√£o Norte √© a maior em √°rea e abriga a maior parte do bioma amaz√¥nico.' },
            { id: 11, disciplina: 'geografia', nivel: 'dificil', texto: 'O que representa o conceito de "popula√ß√£o relativa" ou "densidade demogr√°fica"?', opcoes: ['N√∫mero total de habitantes.', 'Taxa de natalidade de uma √°rea.', 'Rela√ß√£o entre habitantes e territ√≥rio.', 'Movimento migrat√≥rio.'], resposta_correta: 'Rela√ß√£o entre habitantes e territ√≥rio.', explicacao: 'Popula√ß√£o relativa (ou densidade demogr√°fica) √© calculada dividindo-se o n√∫mero de habitantes pela √°rea total (habitantes/km¬≤).' },
            // HIST√ìRIA
            { id: 4, disciplina: 'historia', nivel: 'medio', texto: 'O que a Proclama√ß√£o da Rep√∫blica (1889) marcou no Brasil?', opcoes: ['O fim da escravid√£o', 'O in√≠cio da monarquia', 'O fim do regime mon√°rquico', 'A Independ√™ncia do Brasil'], resposta_correta: 'O fim do regime mon√°rquico', explicacao: 'A Proclama√ß√£o da Rep√∫blica p√¥s fim ao Imp√©rio (monarquia) e deu in√≠cio ao regime republicano no Brasil.' },
            { id: 12, disciplina: 'historia', nivel: 'facil', texto: 'Qual imp√©rio foi governado por Fara√≥s e construiu as Pir√¢mides de Giz√©?', opcoes: ['Imp√©rio Romano', 'Gr√©cia Antiga', 'Egito Antigo', 'Mesopot√¢mia'], resposta_correta: 'Egito Antigo', explicacao: 'Os Fara√≥s foram os reis do Egito Antigo, respons√°veis pela constru√ß√£o das grandes pir√¢mides.' },
            { id: 13, disciplina: 'historia', nivel: 'dificil', texto: 'Qual per√≠odo hist√≥rico √© caracterizado pelo sistema Feudal (servid√£o, poder descentralizado da nobreza e influ√™ncia da Igreja)?', opcoes: ['Idade Contempor√¢nea', 'Idade Moderna', 'Idade M√©dia', 'Antiguidade Cl√°ssica'], resposta_correta: 'Idade M√©dia', explicacao: 'O Feudalismo foi o sistema predominante na Europa durante a Idade M√©dia (s√©culos V ao XV).' },
            // CI√äNCIAS DA NATUREZA
            { id: 5, disciplina: 'ciencias', nivel: 'medio', texto: 'Qual sistema corporal √© respons√°vel pelo transporte de oxig√™nio e nutrientes?', opcoes: ['Sistema Nervoso', 'Sistema Respirat√≥rio', 'Sistema Digest√≥rio', 'Sistema Circulat√≥rio'], resposta_correta: 'Sistema Circulat√≥rio', explicacao: 'O Sistema Circulat√≥rio (cora√ß√£o, vasos e sangue) √© o principal respons√°vel pelo transporte de gases (O2) e nutrientes pelo corpo.' },
            { id: 14, disciplina: 'ciencias', nivel: 'facil', texto: 'O que a Rota√ß√£o da Terra causa?', opcoes: ['As esta√ß√µes do ano', 'As fases da Lua', 'O dia e a noite', 'Os eclipses'], resposta_correta: 'O dia e a noite', explicacao: 'O movimento de Rota√ß√£o (giro da Terra em torno do seu pr√≥prio eixo) √© o respons√°vel pela altern√¢ncia entre o dia e a noite.' },
            { id: 15, disciplina: 'ciencias', nivel: 'dificil', texto: 'Qual √© o processo pelo qual as plantas produzem seu pr√≥prio alimento, utilizando luz solar, √°gua e g√°s carb√¥nico?', opcoes: ['Respira√ß√£o', 'Transpira√ß√£o', 'Fotoss√≠ntese', 'Germina√ß√£o'], resposta_correta: 'Fotoss√≠ntese', explicacao: 'A Fotoss√≠ntese √© o processo fundamental onde plantas, algas e algumas bact√©rias usam a energia luminosa para converter $\\text{CO}_2$ e $\\text{H}_2\\text{O}$ em glicose (alimento) e oxig√™nio.' },
            // Quest√£o extra para garantir o m√≠nimo de 15 no sorteio
            { id: 16, disciplina: 'portugues', nivel: 'facil', texto: 'Qual a principal fun√ß√£o do verbo em uma frase?', opcoes: ['Qualificar o substantivo', 'Ligar duas ora√ß√µes', 'Expressar a√ß√£o, estado ou fen√¥meno', 'Substituir um nome'], resposta_correta: 'Expressar a√ß√£o, estado ou fen√¥meno', explicacao: 'O verbo √© a classe de palavra que denota a√ß√£o (correr), estado (ser, estar) ou fen√¥meno da natureza (chover).' }
        ];

        let currentQuizQuestions = []; // Armazena as 15 quest√µes sorteadas para o quiz atual
        let userAnswers = {}; // Armazena as respostas do usu√°rio {questionId: 'resposta'}

        // =======================================================
        // 2. CONTROLE DE P√ÅGINAS E NAVEGA√á√ÉO
        // =======================================================
        document.getElementById('btn-comecar').addEventListener('click', function() {
            document.getElementById('splash-screen').style.display = 'none';
            document.getElementById('main-header').style.display = 'block';
            document.getElementById('home-page').classList.add('active');
            document.getElementById('splash-screen').classList.remove('active');
            
            document.getElementById('nav-home').classList.add('active');
            document.getElementById('nav-avaliacao').classList.remove('active');
        });

        function showPage(pageId, navButton = null) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.materia-detalhe').forEach(detail => detail.style.display = 'none');
            document.getElementById('materias-list').style.display = 'block';
            
            document.getElementById(pageId).classList.add('active');

            document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
            // L√≥gica para ativar o bot√£o de navega√ß√£o correto, mesmo quando a p√°gina √© chamada por um bot√£o de voltar
            if (navButton) {
                navButton.classList.add('active');
            } else if (pageId === 'home-page') {
                document.getElementById('nav-home').classList.add('active');
            } else if (pageId === 'quiz-page') {
                document.getElementById('nav-avaliacao').classList.add('active');
                // Se for para a p√°gina de quiz, garante que a config esteja vis√≠vel para iniciar novo teste
                document.getElementById('quiz-config').style.display = 'block';
                document.getElementById('quiz-content').style.display = 'none';
                document.getElementById('quiz-results').style.display = 'none';
            }
        }

        // Event listener para mostrar o detalhe das mat√©rias
        document.querySelectorAll('.card-materia').forEach(card => {
            card.addEventListener('click', function() {
                const targetId = this.getAttribute('data-target');
                document.getElementById('materias-list').style.display = 'none';
                
                // Oculta todos os detalhes primeiro, e depois mostra o alvo
                document.querySelectorAll('.materia-detalhe').forEach(detail => detail.style.display = 'none');
                document.getElementById(targetId).style.display = 'block';
            });
        });


        // =======================================================
        // 3. L√ìGICA DO QUIZ
        // =======================================================

        // Fun√ß√£o utilit√°ria para embaralhar um array (Algoritmo Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        document.getElementById('btn-iniciar-quiz').addEventListener('click', function() {
            // L√ä M√öLTIPLAS DISCIPLINAS SELECIONADAS (COM O ATRIBUTO 'multiple' do HTML)
            const selectedDisciplines = Array.from(document.getElementById('select-disciplina').selectedOptions).map(option => option.value);
            const selectedNivel = document.getElementById('select-nivel').value;
            
            if (selectedDisciplines.length === 0) {
                alert('Por favor, selecione pelo menos uma disciplina.');
                return;
            }

            // 1. Filtrar o banco de dados pelas sele√ß√µes do usu√°rio
            // Filtra se a disciplina da quest√£o est√° no array de selectedDisciplines E o n√≠vel corresponde.
            let availableQuestions = questionsDB.filter(q => 
                selectedDisciplines.includes(q.disciplina) && q.nivel === selectedNivel
            );
            
            // 2. Garantir que temos 15 quest√µes (com repeti√ß√£o se necess√°rio)
            if (availableQuestions.length === 0) {
                alert('N√£o h√° quest√µes dispon√≠veis para a sele√ß√£o de disciplina e n√≠vel. Por favor, tente outra combina√ß√£o.');
                return;
            }
            
            // Embaralhar as quest√µes dispon√≠veis
            availableQuestions = shuffleArray(availableQuestions);

            // Selecionar 15 quest√µes aleatoriamente (repetindo se o banco for menor que 15)
            currentQuizQuestions = [];
            for (let i = 0; i < QUESTION_COUNT; i++) {
                // Usamos o √≠ndice modular para garantir que teremos 15 perguntas, mesmo se o filtro retornar menos de 15.
                currentQuizQuestions.push(availableQuestions[i % availableQuestions.length]);
            }
            
            // Resetar respostas (apenas se for um novo quiz, mas manter o objeto para a fun√ß√£o salvar)
            // Se esta linha estivesse faltando, a persist√™ncia n√£o funcionaria:
            userAnswers = {}; 

            document.getElementById('quiz-config').style.display = 'none';
            document.getElementById('quiz-results').style.display = 'none';
            document.getElementById('quiz-content').style.display = 'block';
            document.getElementById('btn-finalizar-quiz').style.display = 'block';
            
            renderQuizQuestions();
        });

        // FUN√á√ÉO CR√çTICA: SALVA A RESPOSTA NO OBJETO userAnswers
        function saveAnswer(questionId, answer) {
            // PONTO CHAVE: Usa o ID √∫nico da quest√£o (do banco de dados) como chave para guardar a resposta
            userAnswers[questionId] = answer; 
        }


        // FUN√á√ÉO CR√çTICA: RENDERIZA AS QUEST√ïES E APLICA O ESTADO SALVO
        function renderQuizQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';
            
            currentQuizQuestions.forEach((q, index) => {
                const questionHtml = document.createElement('div');
                questionHtml.className = 'question-card';
                
                const emojiMap = {
                    'portugues': 'üó£Ô∏è', 'matematica': 'üßÆ', 'ciencias': 'üî¨', 'historia': 'üìú', 'geografia': 'üåé'
                };
                const discEmoji = emojiMap[q.disciplina] || '‚ùì';
                
                // Mapeia e embaralha as op√ß√µes para esta quest√£o
                const shuffledOptions = shuffleArray([...q.opcoes]); 

                // **LEITURA DO ESTADO SALVO:** Pega a resposta previamente salva no objeto userAnswers
                const checkedValue = userAnswers[q.id];

                // Renderiza o HTML das op√ß√µes
                const optionsHtml = shuffledOptions.map((option, optIndex) => {
                    // ID √öNICO E V√ÅLIDO para o input e o label (chave para a sele√ß√£o funcionar)
                    const uniqueId = `q${index}-opt${optIndex}`;
                    
                    // **APLICA√á√ÉO DA PERSIST√äNCIA:** Marca o radio button como 'checked'
                    // se o valor da op√ß√£o for igual √† resposta guardada (checkedValue)
                    return `
                        <input type="radio" 
                            id="${uniqueId}" 
                            name="question-${q.id}"  
                            value="${option}" 
                            onchange="saveAnswer(${q.id}, this.value)"
                            ${checkedValue === option ? 'checked' : ''}>
                        <label class="option-label" for="${uniqueId}">
                            ${option}
                        </label>
                    `;
                }).join('');


                questionHtml.innerHTML = `
                    <h4>${index + 1}. [${discEmoji} ${q.disciplina.toUpperCase()}] ${q.texto}</h4>
                    <div id="options-${q.id}">
                        ${optionsHtml}
                    </div>
                `;
                container.appendChild(questionHtml);
            });
            
            // Atualiza o contador de quest√µes
            document.getElementById('current-question-number').textContent = currentQuizQuestions.length;
        }

        // Finalizar e Calcular o Quiz
        document.getElementById('btn-finalizar-quiz').addEventListener('click', function() {
            let totalAcertos = 0;
            const disciplinaAcertos = {};

            // Inicializa o contador por disciplina
            currentQuizQuestions.forEach(q => {
                if (!disciplinaAcertos[q.disciplina]) {
                    disciplinaAcertos[q.disciplina] = { total: 0, acertos: 0 };
                }
                disciplinaAcertos[q.disciplina].total++;
            });

            const feedbackHtml = document.getElementById('feedback-revisao');
            feedbackHtml.innerHTML = '';
            
            // Processa as respostas
            currentQuizQuestions.forEach((q, index) => {
                // Pega a resposta guardada pela fun√ß√£o saveAnswer
                const userAnswer = userAnswers[q.id]; 
                const isCorrect = userAnswer === q.resposta_correta;
                
                if (isCorrect) {
                    totalAcertos++;
                    disciplinaAcertos[q.disciplina].acertos++;
                } else {
                    const feedbackItem = document.createElement('div');
                    feedbackItem.className = 'feedback-item';
                    feedbackItem.innerHTML = `
                        <h4>‚ùå Erro na Quest√£o ${index + 1} (${q.disciplina.toUpperCase()})</h4>
                        <p><strong>Sua Resposta:</strong> <span class="incorrect">${userAnswer || 'N√£o Respondida'}</span></p>
                        <p><strong>Resposta Correta:</strong> <span class="correct">${q.resposta_correta}</span></p>
                        <p><strong>T√≥pico para Revis√£o:</strong> ${q.explicacao}</p>
                    `;
                    feedbackHtml.appendChild(feedbackItem);
                }
            });

            // Exibir o Relat√≥rio
            document.getElementById('total-acertos').textContent = totalAcertos;
            document.getElementById('total-erros').textContent = QUESTION_COUNT - totalAcertos;
            
            const desempenhoDisciplinasHtml = document.getElementById('desempenho-disciplinas');
            desempenhoDisciplinasHtml.innerHTML = '';

            for (const disc in disciplinaAcertos) {
                const { total, acertos } = disciplinaAcertos[disc];
                const percentual = total > 0 ? ((acertos / total) * 100).toFixed(0) : 0;
                desempenhoDisciplinasHtml.innerHTML += `<p><strong>${disc.toUpperCase()}:</strong> ${acertos} de ${total} (${percentual}%)</p>`;
            }

            // Mudar a visualiza√ß√£o
            document.getElementById('quiz-content').style.display = 'none';
            document.getElementById('quiz-results').style.display = 'block';
            document.getElementById('quiz-config').style.display = 'block';
        });

        // Ocultar home ao carregar para mostrar o splash screen
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('home-page').classList.remove('active');
            document.getElementById('main-header').style.display = 'none';
            // Garante que os detalhes das mat√©rias estejam ocultos ao iniciar
            document.querySelectorAll('.materia-detalhe').forEach(detail => detail.style.display = 'none');
        });

    </script>
</body>
</html>